# Функция загрузки видео для Telegram-бота

## Обзор

Добавлена новая функция для загрузки коротких видео с популярных платформ:
- YouTube
- Instagram
- TikTok

## Возможности

- Автоматическое определение платформы по ссылке
- Специализированные API для каждой платформы:
  - YouTube: y2mate.com API
  - Instagram: instagram-downloader-api
  - TikTok: ssstik.io API
- Информирование пользователя о статусе выполнения
- Проверка размера файла перед отправкой в Telegram (ограничение 50MB)
- Обработка ошибок и предоставление альтернативных способов получения видео
- Таймауты для предотвращения зависания

## Команды

### `/download_video <ссылка>`
Ручная загрузка видео по указанной ссылке

Пример: `/download_video https://www.youtube.com/watch?v=...`

### Автоматическая обработка
Бот также автоматически обнаруживает и обрабатывает ссылки на видео в обычных сообщениях

## Технические детали

### Архитектура

Функционал реализован с использованием следующих компонентов:

- `src/utils/videoDownloader.ts` - основной модуль с логикой загрузки
- `src/commands/downloadVideo.ts` - команда бота
- Интеграция с API: y2mate.com, instagram-downloader-api, ssstik.io

### Обработка ошибок

- Проверка формата ссылки
- Проверка поддерживаемых платформ
- Обработка сетевых ошибок и таймаутов
- Проверка размера файла перед отправкой
- Альтернативные способы получения видео при сбоях

## Использование

Пользователь может:
1. Отправить команду `/download_video` с ссылкой
2. Просто отправить ссылку на видео в чат
3. Дождаться процесса загрузки и получения результата

Бот будет:
1. Анализировать ссылку
2. Определять платформу
3. Выбирать подходящий API для платформы
4. Загружать видео
5. Отправлять пользователю результат

## Поддерживаемые форматы ссылок

### YouTube
- `https://www.youtube.com/watch?v=VIDEO_ID`
- `https://youtu.be/VIDEO_ID`
- `https://www.youtube.com/embed/VIDEO_ID`
- `https://www.youtube.com/v/VIDEO_ID`

### Instagram
- `https://www.instagram.com/p/POST_ID/`
- `https://instagr.am/p/POST_ID/`

### TikTok
- `https://www.tiktok.com/@user/video/VIDEO_ID`
- `https://vm.tiktok.com/VIDEO_CODE/`